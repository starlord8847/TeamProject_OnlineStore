<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.teampj.shop.board.BoardService">

	<resultMap type="com.teampj.shop.board.BoardDTO" id="dto">
		<result property="bnum" column="bnum"/>
		<result property="bcode" column="bcode"/>
		<result property="bname" column="bname"/>
		<result property="bcont" column="bcont"/>
		<result property="pcode" column="pcode"/>
		<result property="bdate" column="bdate"/>
		<result property="btype" column="btype"/>
		<result property="reproot" column="reproot"/>
		<result property="repstep" column="repstep"/>
		<result property="repindent" column="repindent"/>
	</resultMap>
  
  <select id="review" resultMap="dto">
    select *
    from boarddb
    where pcode = #{param1} and btype = '2'
  </select>
  
  <select id="inquiry" resultMap="dto">
    select *
    from boarddb
    where pcode = #{param1} and btype = '1'
  </select>
  
  <select id="cntnotice" resultType="int">
    select count(*)
    from boarddb
  </select>
  
  <select id="selectnotice" resultMap="dto">
    select *
    from (select rownum rm, A.* from(select * from boarddb order by reproot desc, repstep asc)A)
    where rm between #{start} and #{end}
  </select>  
  
  
</mapper>